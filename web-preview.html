<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¿ƒæ°´</title>
    <script src="encouragements.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
        }

        .floating-hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            z-index: 0;
        }

        .heart {
            position: absolute;
            color: rgba(255, 182, 193, 0.6);
            font-size: 24px;
            animation: float 6s ease-in infinite;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100vh) rotate(720deg);
                opacity: 0;
            }
        }

        .phone-frame {
            width: 375px;
            height: 812px;
            background: linear-gradient(180deg, #fff5f7 0%, #ffffff 100%);
            border-radius: 40px;
            box-shadow: 0 20px 60px rgba(255, 182, 193, 0.4);
            overflow: hidden;
            position: relative;
            z-index: 1;
            border: 4px solid #ffb6c1;
        }

        .status-bar {
            background: linear-gradient(135deg, #ff6b9d 0%, #ff8fab 100%);
            height: 44px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            color: white;
            font-size: 14px;
            font-weight: 500;
        }

        .app-header {
            background: linear-gradient(135deg, #ff6b9d 0%, #ff8fab 100%);
            color: white;
            padding: 16px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
        }

        .app-header::after {
            content: 'ğŸ’•';
            position: absolute;
            right: 70px;
            font-size: 20px;
            animation: heartbeat 1.5s ease-in-out infinite;
        }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .app-header h1 {
            font-size: 22px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .settings-btn {
            background: rgba(255,255,255,0.3);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            transition: all 0.3s;
        }

        .settings-btn:hover {
            background: rgba(255,255,255,0.5);
            transform: rotate(30deg);
        }

        .header-buttons {
            display: flex;
            gap: 10px;
        }

        .stats-btn {
            background: rgba(255,255,255,0.3);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            transition: all 0.3s;
        }

        .stats-btn:hover {
            background: rgba(255,255,255,0.5);
            transform: scale(1.1);
        }

        .app-content {
            padding: 20px;
            height: calc(100% - 44px - 80px);
            overflow-y: auto;
        }

        .greeting {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px;
            background: linear-gradient(135deg, #ffe4e9 0%, #fff0f3 100%);
            border-radius: 20px;
            border: 2px solid #ffcdd6;
        }

        .greeting h2 {
            font-size: 22px;
            color: #ff6b9d;
            margin-bottom: 8px;
            font-weight: bold;
        }

        .greeting .subtitle {
            font-size: 14px;
            color: #888;
            font-style: italic;
        }

        .love-quote {
            text-align: center;
            margin-bottom: 20px;
            padding: 12px;
            background: #fff0f3;
            border-radius: 15px;
            border-left: 4px solid #ff6b9d;
        }

        .love-quote p {
            font-size: 14px;
            color: #666;
            line-height: 1.6;
        }

        .love-quote .heart-icon {
            color: #ff6b9d;
            font-size: 18px;
        }

        .counter-circle {
            width: 180px;
            height: 180px;
            background: linear-gradient(135deg, #ff6b9d 0%, #ff8fab 50%, #ffb6c1 100%);
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin: 0 auto 20px;
            box-shadow: 0 8px 30px rgba(255, 107, 157, 0.4);
            position: relative;
            border: 4px solid #fff;
        }

        .counter-circle::before {
            content: 'ğŸ’§';
            position: absolute;
            top: -10px;
            font-size: 30px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .counter-circle .count {
            font-size: 64px;
            font-weight: bold;
            color: white;
            line-height: 1;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .counter-circle .label {
            font-size: 20px;
            color: white;
            margin-top: 5px;
        }

        .counter-circle .encouragement {
            font-size: 12px;
            color: rgba(255,255,255,0.9);
            margin-top: 5px;
        }

        .drink-btn {
            width: 100%;
            height: 56px;
            background: linear-gradient(135deg, #ff6b9d 0%, #ff8fab 100%);
            color: white;
            border: none;
            border-radius: 28px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(255, 107, 157, 0.4);
        }

        .drink-btn:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 8px 25px rgba(255, 107, 157, 0.5);
        }

        .drink-btn:active {
            transform: translateY(0) scale(0.98);
        }

        .progress-container {
            margin-bottom: 20px;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: #ffe4e9;
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 8px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff6b9d 0%, #ff8fab 100%);
            border-radius: 6px;
            transition: width 0.5s ease;
            width: 0%;
        }

        .progress-text {
            text-align: center;
            font-size: 14px;
            color: #ff6b9d;
            font-weight: 500;
        }

        .drink-btn .heart {
            font-size: 24px;
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .health-tip {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            padding: 12px 16px;
            border-radius: 12px;
            margin-bottom: 20px;
            border-left: 4px solid #ff6b9d;
        }

        .health-tip p {
            font-size: 13px;
            color: #666;
            line-height: 1.5;
        }

        .health-tip .tip-icon {
            color: #ff6b9d;
            margin-right: 5px;
        }

        .records-title {
            font-size: 16px;
            font-weight: bold;
            color: #ff6b9d;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .record-item {
            background: linear-gradient(135deg, #fff5f7 0%, #ffffff 100%);
            padding: 14px;
            border-radius: 12px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
            border: 1px solid #ffe4e9;
            transition: all 0.3s;
        }

        .record-item:hover {
            transform: translateX(5px);
            box-shadow: 0 2px 8px rgba(255, 107, 157, 0.2);
        }

        .record-item .icon {
            font-size: 24px;
        }

        .record-item span {
            font-size: 14px;
            color: #555;
        }

        .record-item .time {
            color: #ff6b9d;
            font-weight: 500;
        }

        .settings-panel {
            display: none;
            padding: 20px;
            height: calc(100% - 44px - 80px);
            overflow-y: auto;
        }

        .settings-panel.active {
            display: block;
        }

        .settings-card {
            background: linear-gradient(135deg, #fff5f7 0%, #ffffff 100%);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(255, 182, 193, 0.2);
            margin-bottom: 20px;
            border: 2px solid #ffe4e9;
        }

        .setting-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .setting-row:last-child {
            margin-bottom: 0;
        }

        .setting-label {
            font-size: 16px;
            font-weight: 500;
            color: #555;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .switch {
            width: 52px;
            height: 28px;
            background: #ddd;
            border-radius: 14px;
            position: relative;
            cursor: pointer;
            transition: background 0.3s;
        }

        .switch.active {
            background: linear-gradient(135deg, #ff6b9d 0%, #ff8fab 100%);
        }

        .switch::after {
            content: '';
            position: absolute;
            width: 24px;
            height: 24px;
            background: white;
            border-radius: 50%;
            top: 2px;
            left: 2px;
            transition: left 0.3s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .switch.active::after {
            left: 26px;
        }

        .time-control {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .time-btn {
            width: 36px;
            height: 36px;
            border: 2px solid #ff6b9d;
            background: white;
            color: #ff6b9d;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.2s;
        }

        .time-btn:hover {
            background: linear-gradient(135deg, #ff6b9d 0%, #ff8fab 100%);
            color: white;
            transform: scale(1.1);
        }

        .time-display {
            font-size: 18px;
            font-weight: bold;
            color: #ff6b9d;
            min-width: 80px;
            text-align: center;
        }

        .section-title {
            font-size: 14px;
            font-weight: 600;
            color: #ff6b9d;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .save-btn {
            width: 100%;
            height: 52px;
            background: linear-gradient(135deg, #ff6b9d 0%, #ff8fab 100%);
            color: white;
            border: none;
            border-radius: 26px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(255, 107, 157, 0.4);
        }

        .save-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 157, 0.5);
        }

        .back-btn {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 8px;
            transition: transform 0.3s;
        }

        .back-btn:hover {
            transform: translateX(-5px);
        }

        .home-indicator {
            position: absolute;
            bottom: 8px;
            left: 50%;
            transform: translateX(-50%);
            width: 134px;
            height: 5px;
            background: #ff6b9d;
            border-radius: 3px;
            opacity: 0.3;
        }

        .encouragement-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: linear-gradient(135deg, #ff6b9d 0%, #ff8fab 100%);
            color: white;
            padding: 30px 40px;
            border-radius: 20px;
            font-size: 20px;
            font-weight: bold;
            z-index: 1000;
            box-shadow: 0 10px 40px rgba(255, 107, 157, 0.5);
            transition: transform 0.3s ease-out;
            text-align: center;
        }

        .encouragement-popup.show {
            transform: translate(-50%, -50%) scale(1);
        }

        .encouragement-popup .heart {
            font-size: 40px;
            display: block;
            margin-bottom: 10px;
            animation: heartbeat 1s ease-in-out infinite;
        }

        @keyframes circle-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .pulse {
            animation: circle-pulse 0.3s ease-in-out;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #999;
        }

        .empty-state .icon {
            font-size: 48px;
            margin-bottom: 10px;
        }

        .empty-state p {
            font-size: 14px;
        }

        .reminder-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: linear-gradient(135deg, #ff6b9d 0%, #ff8fab 100%);
            color: white;
            padding: 30px;
            border-radius: 24px;
            font-size: 18px;
            font-weight: bold;
            z-index: 1000;
            box-shadow: 0 15px 50px rgba(255, 107, 157, 0.6);
            transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            text-align: center;
            min-width: 280px;
            border: 3px solid white;
        }

        .reminder-popup.show {
            transform: translate(-50%, -50%) scale(1);
        }

        .reminder-popup .heart {
            font-size: 50px;
            display: block;
            margin-bottom: 15px;
            animation: heartbeat 1s ease-in-out infinite;
        }

        .reminder-popup .message {
            font-size: 20px;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .reminder-popup .time-info {
            font-size: 12px;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .reminder-popup .btn-group {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .reminder-popup button {
            padding: 12px 24px;
            border: none;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .reminder-popup .drink-now-btn {
            background: white;
            color: #ff6b9d;
        }

        .reminder-popup .drink-now-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(255,255,255,0.4);
        }

        .reminder-popup .close-btn {
            background: rgba(255,255,255,0.3);
            color: white;
        }

        .reminder-popup .close-btn:hover {
            background: rgba(255,255,255,0.5);
        }

        .countdown-display {
            background: linear-gradient(135deg, #ffe4e9 0%, #fff0f3 100%);
            padding: 12px 20px;
            border-radius: 20px;
            margin-bottom: 20px;
            text-align: center;
            border: 2px solid #ffcdd6;
        }

        .countdown-display .label {
            font-size: 12px;
            color: #888;
            margin-bottom: 4px;
        }

        .countdown-display .time {
            font-size: 24px;
            font-weight: bold;
            color: #ff6b9d;
        }

        .cooldown-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            background: linear-gradient(135deg, #ff6b9d 0%, #ff8fab 100%);
            padding: 40px 30px;
            border-radius: 30px;
            text-align: center;
            z-index: 2000;
            box-shadow: 0 20px 60px rgba(255, 107, 157, 0.4);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            max-width: 90vw;
        }

        .cooldown-popup.show {
            opacity: 1;
            visibility: visible;
            transform: translate(-50%, -50%) scale(1);
        }

        .cooldown-popup .heart {
            font-size: 60px;
            display: block;
            margin-bottom: 20px;
            animation: heartbeat 1s ease-in-out infinite;
        }

        .cooldown-popup .message {
            font-size: 20px;
            color: white;
            margin-bottom: 25px;
            line-height: 1.5;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }

        .cooldown-popup .countdown-info {
            background: rgba(255, 255, 255, 0.25);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 25px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .cooldown-popup .countdown-label {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.9);
        }

        .cooldown-popup .countdown-time {
            font-size: 48px;
            font-weight: bold;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .cooldown-popup button {
            background: white;
            color: #ff6b9d;
            border: none;
            padding: 15px 40px;
            border-radius: 25px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .cooldown-popup button:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }

        .cooldown-popup button:active {
            transform: scale(0.98);
        }

        .notification-toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #ff6b9d 0%, #ff8fab 100%);
            color: white;
            padding: 16px 24px;
            border-radius: 16px;
            font-size: 14px;
            font-weight: 500;
            z-index: 1001;
            box-shadow: 0 8px 30px rgba(255, 107, 157, 0.4);
            transform: translateX(400px);
            transition: transform 0.4s ease-out;
            max-width: 300px;
        }

        .notification-toast.show {
            transform: translateX(0);
        }

        .notification-toast .heart {
            font-size: 20px;
            margin-right: 8px;
        }

        .easter-egg-popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.4s ease, visibility 0.4s ease;
        }

        .easter-egg-popup.show {
            opacity: 1;
            visibility: visible;
        }

        .confetti-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            animation: confetti-fall 3s linear forwards;
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        .easter-egg-content {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 25%, #FF69B4 50%, #9370DB 75%, #FFD700 100%);
            background-size: 400% 400%;
            animation: rainbow 3s ease infinite;
            padding: 50px 40px;
            border-radius: 30px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(255, 215, 0, 0.6);
            max-width: 320px;
            position: relative;
            z-index: 2001;
            border: 4px solid white;
            transform: scale(0);
            transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .easter-egg-popup.show .easter-egg-content {
            transform: scale(1);
        }

        @keyframes rainbow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .celebration-emoji {
            font-size: 48px;
            margin-bottom: 20px;
            animation: bounce 0.6s ease-in-out infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }

        .easter-egg-title {
            font-size: 28px;
            font-weight: bold;
            color: white;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .easter-egg-message {
            font-size: 18px;
            color: white;
            margin-bottom: 25px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
            line-height: 1.5;
        }

        .easter-egg-btn {
            background: linear-gradient(135deg, #ff6b9d 0%, #ff8fab 100%);
            color: white;
            border: 3px solid white;
            padding: 15px 40px;
            border-radius: 25px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(255, 107, 157, 0.5);
            animation: pulse 1.5s ease-in-out infinite;
        }

        .easter-egg-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(255, 107, 157, 0.7);
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .stats-panel {
            display: none;
            padding: 20px;
            height: calc(100% - 44px - 80px);
            overflow-y: auto;
        }

        .stats-panel.active {
            display: block;
        }

        .stats-header {
            background: linear-gradient(135deg, #ff6b9d 0%, #ff8fab 100%);
            color: white;
            padding: 16px 20px;
            border-radius: 20px 20px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: -20px -20px 20px -20px;
            padding-bottom: 20px;
        }

        .stats-header h2 {
            font-size: 22px;
            font-weight: bold;
        }

        .stats-overview {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }

        .stats-card {
            background: linear-gradient(135deg, #fff5f7 0%, #ffffff 100%);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(255, 182, 193, 0.2);
            border: 2px solid #ffe4e9;
        }

        .stats-icon {
            font-size: 32px;
            margin-bottom: 10px;
        }

        .stats-number {
            font-size: 28px;
            font-weight: bold;
            color: #ff6b9d;
            margin-bottom: 5px;
        }

        .stats-label {
            font-size: 14px;
            color: #888;
        }

        .stats-section {
            background: linear-gradient(135deg, #fff5f7 0%, #ffffff 100%);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid #ffe4e9;
        }

        .stats-section-title {
            font-size: 16px;
            font-weight: bold;
            color: #ff6b9d;
            margin-bottom: 15px;
        }

        .chart-container {
            height: 200px;
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
            padding: 10px 0;
        }

        .chart-bar {
            width: 40px;
            background: linear-gradient(180deg, #ff6b9d 0%, #ff8fab 100%);
            border-radius: 8px 8px 0 0;
            transition: height 0.3s ease;
            position: relative;
        }

        .chart-bar .label {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 12px;
            color: #888;
            white-space: nowrap;
        }

        .chart-bar .count {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 14px;
            font-weight: bold;
            color: #ff6b9d;
        }

        .calendar-container {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            position: relative;
        }

        .calendar-day.empty {
            background: #f5f5f5;
        }

        .calendar-day.today {
            border: 2px solid #ff6b9d;
            font-weight: bold;
        }

        .calendar-day.not-achieved {
            background: #ffe4e9;
            color: #888;
        }

        .calendar-day.achieved {
            background: linear-gradient(135deg, #ff6b9d 0%, #ff8fab 100%);
            color: white;
        }

        .calendar-day .drink-count {
            font-size: 10px;
            margin-top: 2px;
        }

        .back-btn {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 8px;
            transition: transform 0.3s;
        }

        .back-btn:hover {
            transform: translateX(-5px);
        }

        @media (max-width: 768px) {
            body {
                padding: 0;
                align-items: flex-start;
            }

            .phone-frame {
                width: 100%;
                height: 100vh;
                border-radius: 0;
                border: none;
                box-shadow: none;
            }

            .app-content {
                height: calc(100% - 44px - 80px);
            }
        }

        @media (min-width: 320px) and (max-width: 375px) {
            .stats-overview {
                grid-template-columns: 1fr;
            }
        }

        @media (min-width: 376px) and (max-width: 428px) {
            .stats-overview {
                grid-template-columns: repeat(3, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="floating-hearts" id="floatingHearts"></div>

    <div class="phone-frame">
        <div class="status-bar">
            <span id="currentTime">9:41</span>
            <span>ğŸ’• 100%</span>
        </div>

        <div class="app-header">
            <h1>ğŸ’— å–æ°´æé†’</h1>
            <div class="header-buttons">
                <button class="stats-btn" onclick="toggleStats()">ğŸ“Š</button>
                <button class="settings-btn" onclick="toggleSettings()">âš™ï¸</button>
            </div>
        </div>

        <div class="app-content" id="mainContent">
            <div class="greeting">
                <h2>äº²çˆ±çš„æ˜•æ˜• ğŸ’•</h2>
                <p class="subtitle">ä¹–å®å®ä»Šå¤©ä¹Ÿè¦å¥½å¥½å–æ°´å“¦~</p>
            </div>

            <div class="countdown-display" id="countdownDisplay">
                <div class="label">â° è·ç¦»ä¸‹æ¬¡æé†’è¿˜æœ‰</div>
                <div class="time" id="countdownTime">--:--</div>
            </div>

            <div class="love-quote">
                <p><span class="heart-icon">ğŸ’—</span> å®å®å¤šå–æ°´ï¼Œçš®è‚¤ä¼šæ›´å¥½ï¼Œèº«ä½“ä¼šæ›´æ£’ï¼Œæˆ‘æœ€çˆ±æˆ‘çš„ä¹–å®å®~</p>
            </div>

            <div class="counter-circle" id="counterCircle">
                <span class="count" id="drinkCount">0</span>
                <span class="label">ä»Šæ—¥</span>
                <span class="encouragement" id="encouragement">åŠ æ²¹ï¼</span>
            </div>

            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text" id="progressText">0 / 8</div>
            </div>

            <button class="drink-btn" onclick="drinkWater()">
                <span class="heart">ğŸ’—</span>
                æˆ‘å–äº†ä¸€æ¯æ°´
                <span class="heart">ğŸ’—</span>
            </button>

            <div class="health-tip">
                <p><span class="tip-icon">ğŸ’¡</span> <span id="healthTip">æ¯å¤©å–8æ¯æ°´ï¼Œä¿æŒèº«ä½“å¥åº·ï¼Œæˆ‘ä¼šä¸€ç›´é™ªç€ä½ ~</span></p>
            </div>

            <div class="records-title">
                ğŸ“ æœ€è¿‘è®°å½•
            </div>
            <div id="recordsList">
                <div class="empty-state">
                    <div class="icon">ğŸ’§</div>
                    <p>è¿˜æ²¡æœ‰å–æ°´è®°å½•å“¦ï¼Œå¿«ç‚¹å‡»æŒ‰é’®å¼€å§‹å§~</p>
                </div>
            </div>
        </div>

        <div class="settings-panel" id="settingsPanel">
            <div class="settings-card">
                <div class="setting-row">
                    <span class="setting-label">ğŸ’Œ å¯ç”¨æé†’</span>
                    <div class="switch active" id="reminderSwitch" onclick="toggleReminder()"></div>
                </div>

                <div id="reminderSettings">
                    <div class="section-title" style="margin-top: 20px;">â° æé†’é—´éš”</div>
                    <div class="setting-row">
                        <button class="time-btn" onclick="changeInterval(-15)">-</button>
                        <span class="time-display" id="intervalDisplay">60 åˆ†é’Ÿ</span>
                        <button class="time-btn" onclick="changeInterval(15)">+</button>
                    </div>

                    <div class="section-title" style="margin-top: 20px;">ğŸŒ… æé†’æ—¶é—´æ®µ</div>
                    
                    <div class="setting-row">
                        <span class="setting-label" style="font-size: 13px; color: #888;">å¼€å§‹æ—¶é—´</span>
                        <div class="time-control">
                            <button class="time-btn" onclick="changeStartTime(-1)">-</button>
                            <span class="time-display" id="startTimeDisplay">09:00</span>
                            <button class="time-btn" onclick="changeStartTime(1)">+</button>
                        </div>
                    </div>

                    <div class="setting-row">
                        <span class="setting-label" style="font-size: 13px; color: #888;">ç»“æŸæ—¶é—´</span>
                        <div class="time-control">
                            <button class="time-btn" onclick="changeEndTime(-1)">-</button>
                            <span class="time-display" id="endTimeDisplay">22:00</span>
                            <button class="time-btn" onclick="changeEndTime(1)">+</button>
                        </div>
                    </div>
                </div>

                <div class="section-title" style="margin-top: 20px;">ğŸ¯ æ¯æ—¥å–æ°´ç›®æ ‡</div>
                <div class="setting-row">
                    <button class="time-btn" onclick="changeDailyGoal(-1)">-</button>
                    <span class="time-display" id="dailyGoalDisplay">8 æ¯</span>
                    <button class="time-btn" onclick="changeDailyGoal(1)">+</button>
                </div>
            </div>

            <button class="save-btn" onclick="saveSettings()">
                ğŸ’ ä¿å­˜è®¾ç½®
            </button>
        </div>

        <div class="stats-panel" id="statsPanel">
            <div class="stats-header">
                <h2>ğŸ“Š ç»Ÿè®¡æ•°æ®</h2>
                <button class="back-btn" onclick="toggleStats()">â†</button>
            </div>

            <div class="stats-overview">
                <div class="stats-card">
                    <div class="stats-icon">ğŸ’§</div>
                    <div class="stats-info">
                        <div class="stats-number" id="totalDrinks">0</div>
                        <div class="stats-label">æ€»å–æ°´é‡</div>
                    </div>
                </div>
                <div class="stats-card">
                    <div class="stats-icon">ğŸ¯</div>
                    <div class="stats-info">
                        <div class="stats-number" id="goalDays">0</div>
                        <div class="stats-label">è¾¾æ ‡å¤©æ•°</div>
                    </div>
                </div>
                <div class="stats-card">
                    <div class="stats-icon">ğŸ“…</div>
                    <div class="stats-info">
                        <div class="stats-number" id="currentStreak">0</div>
                        <div class="stats-label">è¿ç»­è¾¾æ ‡</div>
                    </div>
                </div>
            </div>

            <div class="stats-section">
                <h3 class="stats-section-title">ğŸ“ˆ æœ¬å‘¨ç»Ÿè®¡</h3>
                <div class="chart-container" id="weekChart"></div>
            </div>

            <div class="stats-section">
                <h3 class="stats-section-title">ğŸ“… æœ¬æœˆæ—¥å†</h3>
                <div class="calendar-container" id="calendarContainer"></div>
            </div>
        </div>

        <div class="home-indicator"></div>
    </div>

    <div class="encouragement-popup" id="encouragementPopup">
        <span class="heart">ğŸ’—</span>
        <span id="popupText">çœŸæ£’ï¼</span>
    </div>

    <div class="reminder-popup" id="reminderPopup">
        <span class="heart">ğŸ’•</span>
        <div class="message" id="reminderMessage">ä¹–å®å®è¯¥å–æ°´å•¦~</div>
        <div class="time-info" id="reminderTimeInfo"></div>
        <div class="btn-group">
            <button class="drink-now-btn" onclick="drinkFromReminder()">ğŸ’§ æˆ‘å–å•¦</button>
            <button class="close-btn" onclick="closeReminder()">ç¨åå†è¯´</button>
        </div>
    </div>

    <div class="cooldown-popup" id="cooldownPopup">
        <span class="heart">â°</span>
        <div class="message" id="cooldownMessage">å®å®ï¼Œåˆšå–è¿‡æ°´å•¦ï¼Œä¼‘æ¯ä¸€ä¸‹å†å–å“¦~</div>
        <div class="countdown-info">
            <div class="countdown-label">è¿˜è¦ç­‰å¾…</div>
            <div class="countdown-time" id="cooldownTime">60</div>
            <div class="countdown-label">ç§’</div>
        </div>
        <button class="close-btn" onclick="closeCooldownPopup()">æˆ‘çŸ¥é“äº†</button>
    </div>

    <div class="notification-toast" id="notificationToast">
        <span class="heart">ğŸ’•</span>
        <span id="toastMessage"></span>
    </div>

    <div class="easter-egg-popup" id="easterEggPopup">
        <div class="confetti-container" id="confettiContainer"></div>
        <div class="easter-egg-content">
            <div class="celebration-emoji">ğŸ‰ğŸŠğŸ‰</div>
            <h2 class="easter-egg-title">æ­å–œå®å®è¾¾æˆ100æ¯ï¼</h2>
            <p class="easter-egg-message">æˆªå›¾æ‰¾å“¥å“¥é¢†å–å°çº¢åŒ…å¥–åŠ± ğŸ§§</p>
            <button class="easter-egg-btn" onclick="hideEasterEgg()">ğŸ§§ é¢†å–å¥–åŠ±</button>
        </div>
    </div>

    <script>
        let drinkCount = 0;
        let records = [];
        let reminderEnabled = true;
        let reminderInterval = 60;
        let startHour = 9;
        let startMinute = 0;
        let endHour = 22;
        let endMinute = 0;

        const healthTips = [
            "å®å®æ¯å¤©å–8æ¯æ°´ï¼Œä¿æŒèº«ä½“å¥åº·ï¼Œæˆ‘ä¼šä¸€ç›´é™ªç€ä½ ~",
            "æ—©æ™¨ä¸€æ¯æ°´ï¼Œå”¤é†’å®å®ç¾å¥½çš„ä¸€å¤©~",
            "å¤šå–æ°´èƒ½ä¿ƒè¿›æ–°é™ˆä»£è°¢ï¼Œè®©å®å®æ›´ç¾å“¦~",
            "å­¦ä¹ ç´¯äº†å°±å–æ¯æ°´ï¼Œå®å®ä¼‘æ¯ä¸€ä¸‹~",
            "å–æ°´æ˜¯æœ€å¥½çš„æŠ¤è‚¤å“ï¼Œæ˜•æ˜•è¦ç¾ç¾çš„~",
            "å®å®è®°å¾—å°å£æ…¢é¥®ï¼Œå¯¹èº«ä½“æ›´å¥½å“¦~",
            "ä¹–å®å®å¤šå–æ°´ï¼Œèº«ä½“æ£’æ£’å“’~",
            "çˆ±å–æ°´çš„å®å®çš®è‚¤æœ€å¥½äº†~"
        ];

        const reminderMessages = {
            morning: [
                "æ—©å®‰å®å®ï¼Œå–æ¯æ°´å¼€å¯æ–°çš„ä¸€å¤©~ ğŸ’•",
                "å®å®æ—©å®‰ï¼æ¥æ¯æ¸©æ°´å”¤é†’èº«ä½“~ ğŸ’—",
                "äº²çˆ±çš„æ˜•æ˜•ï¼Œæ—©ä¸Šå¥½ï¼å–æ°´å•¦~ ğŸ’",
                "æ—©å®‰å®å®ï¼Œä¸€æ¯æ°´å¼€å§‹ç¾å¥½çš„ä¸€å¤©~ ğŸ’•",
                "å®å®æ—©ä¸Šå¥½ï¼Œè®°å¾—å…ˆå–æ¯æ°´å“¦~ ğŸ’—"
            ],
            evening: [
                "å®å®ï¼Œå–æ¯æ°´æ”¾æ¾å¿ƒæƒ…~ ğŸ’•",
                "æ™šå®‰å‰çš„æ¸©æ°´ï¼Œè®©å®å®ç¡å¾—æ›´é¦™~ ğŸ’—",
                "äº²çˆ±çš„æ˜•æ˜•ï¼Œç¡å‰å–æ¯æ°´æ”¾æ¾ä¸€ä¸‹~ ğŸ’",
                "å®å®ï¼Œä¸€æ¯æ¸©æ°´ç»“æŸç¾å¥½çš„ä¸€å¤©~ ğŸ’•",
                "ä¹–å®å®ï¼Œç¡å‰å–æ¯æ°´ï¼Œæ˜å¤©æ›´ç²¾ç¥~ ğŸ’—"
            ],
            general: [
                "ä¹–å®å®è¯¥å–æ°´å•¦~ ğŸ’•",
                "äº²çˆ±çš„æ˜•æ˜•ï¼Œè®°å¾—å–æ°´å‘€~ ğŸ’—",
                "å®å®ï¼Œè¯¥è¡¥å……æ°´åˆ†å•¦~ ğŸ’",
                "æ˜•æ˜•å®è´ï¼Œå–æ°´æ—¶é—´åˆ°~ ğŸ’•",
                "ä¹–ï¼Œå–æ¯æ°´ä¼‘æ¯ä¸€ä¸‹å§~ ğŸ’—",
                "å®å®è¯¥å–æ°´å•¦ï¼Œçˆ±ä½ å“Ÿ~ ğŸ’",
                "æ˜•æ˜•ï¼Œæ¥æ¯æ°´æ¶¦æ¶¦å–‰~ ğŸ’•",
                "ä¹–å®å®ï¼Œå–æ°´æ—¶é—´åˆ°å•¦~ ğŸ’—"
            ]
        };

        let nextReminderTime = null;
        let countdownInterval = null;
        let reminderTimeout = null;
        let dailyGoal = 8;
        let dailyRecords = {};
        let easterEggTriggered = false;
        let lastDrinkTime = null;
        const cooldownTime = 60000;

        function createFloatingHearts() {
            const container = document.getElementById('floatingHearts');
            for (let i = 0; i < 15; i++) {
                const heart = document.createElement('div');
                heart.className = 'heart';
                heart.innerHTML = ['ğŸ’—', 'ğŸ’–', 'ğŸ’•', 'ğŸ’'][Math.floor(Math.random() * 4)];
                heart.style.left = Math.random() * 100 + '%';
                heart.style.animationDuration = (Math.random() * 3 + 4) + 's';
                heart.style.animationDelay = Math.random() * 5 + 's';
                container.appendChild(heart);
            }
        }

        function updateTime() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' });
            document.getElementById('currentTime').textContent = timeStr;
        }

        function showEncouragement() {
            const popup = document.getElementById('encouragementPopup');
            const text = document.getElementById('popupText');
            text.textContent = encouragements[Math.floor(Math.random() * encouragements.length)];
            popup.classList.add('show');
            setTimeout(() => popup.classList.remove('show'), 2000);
        }

        function drinkWater() {
            const now = new Date();
            
            // æ£€æŸ¥å†·å´æ—¶é—´
            if (lastDrinkTime) {
                const timeDiff = now.getTime() - lastDrinkTime.getTime();
                if (timeDiff < cooldownTime) {
                    const remainingSeconds = Math.ceil((cooldownTime - timeDiff) / 1000);
                    showCooldownPopup(remainingSeconds);
                    return;
                }
            }
            
            drinkCount++;
            const dateStr = now.toISOString().split('T')[0];
            const timeStr = now.toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' });
            records.unshift({ time: timeStr, icon: ['ğŸ’§', 'ğŸ’¦', 'ğŸ’—', 'ğŸ’–'][Math.floor(Math.random() * 4)] });
            
            // æ›´æ–°æ¯æ—¥è®°å½•
            if (!dailyRecords[dateStr]) {
                dailyRecords[dateStr] = { count: 0, times: [] };
            }
            dailyRecords[dateStr].count++;
            dailyRecords[dateStr].times.push(timeStr);
            
            // æ›´æ–°ä¸Šæ¬¡å–æ°´æ—¶é—´
            lastDrinkTime = now;
            
            // é™åˆ¶è®°å½•æœ€å¤š100æ¡
            if (records.length > 100) {
                records = records.slice(0, 100);
            }
            
            updateDisplay();
            saveData();
            
            // æ£€æŸ¥æ˜¯å¦è¾¾åˆ°100æ¬¡ï¼Œè§¦å‘å½©è›‹
            if (drinkCount === 100 && !easterEggTriggered) {
                easterEggTriggered = true;
                showEasterEgg();
                saveData();
            } else {
                showEncouragement();
            }
            
            const circle = document.getElementById('counterCircle');
            circle.classList.add('pulse');
            setTimeout(() => circle.classList.remove('pulse'), 300);

            // æ›´æ–°é¼“åŠ±è¯­ï¼ˆåŸºäºæ¯æ—¥ç›®æ ‡ï¼‰
            const todayCount = dailyRecords[dateStr] ? dailyRecords[dateStr].count : 0;
            document.getElementById('encouragement').textContent = 
                todayCount >= dailyGoal ? "æ­å–œå®å®å®Œæˆä»Šæ—¥ç›®æ ‡ï¼ğŸ‰" : 
                todayCount >= Math.floor(dailyGoal * 0.5) ? "ç»§ç»­ä¿æŒï¼ğŸ’—" : "åŠ æ²¹ï¼ğŸ’";

            // éšæœºæ›´æ¢å¥åº·æç¤º
            document.getElementById('healthTip').textContent = 
                healthTips[Math.floor(Math.random() * healthTips.length)];
        }

        function updateDisplay() {
            const today = new Date();
            const todayStr = today.toISOString().split('T')[0];
            const todayCount = dailyRecords[todayStr] ? dailyRecords[todayStr].count : 0;
            
            document.getElementById('drinkCount').textContent = todayCount;
            
            // æ›´æ–°ä»Šæ—¥è¿›åº¦
            const progressPercent = Math.min(100, (todayCount / dailyGoal) * 100);
            document.getElementById('progressFill').style.width = progressPercent + '%';
            document.getElementById('progressText').textContent = `${todayCount} / ${dailyGoal}`;
            
            const recordsList = document.getElementById('recordsList');
            if (records.length === 0) {
                recordsList.innerHTML = `
                    <div class="empty-state">
                        <div class="icon">ğŸ’§</div>
                        <p>è¿˜æ²¡æœ‰å–æ°´è®°å½•å“¦ï¼Œå¿«ç‚¹å‡»æŒ‰é’®å¼€å§‹å§~</p>
                    </div>
                `;
            } else {
                recordsList.innerHTML = records.slice(0, 10).map((record, index) => `
                    <div class="record-item" style="animation-delay: ${index * 0.1}s">
                        <span class="icon">${record.icon}</span>
                        <span>åœ¨ <span class="time">${record.time}</span> å–äº†ä¸€æ¯æ°´</span>
                    </div>
                `).join('');
            }
        }

        function toggleSettings() {
            const mainContent = document.getElementById('mainContent');
            const settingsPanel = document.getElementById('settingsPanel');
            
            if (settingsPanel.classList.contains('active')) {
                settingsPanel.classList.remove('active');
                mainContent.style.display = 'block';
            } else {
                settingsPanel.classList.add('active');
                mainContent.style.display = 'none';
            }
        }

        function toggleReminder() {
            reminderEnabled = !reminderEnabled;
            const switchEl = document.getElementById('reminderSwitch');
            const settingsDiv = document.getElementById('reminderSettings');
            
            if (reminderEnabled) {
                switchEl.classList.add('active');
                settingsDiv.style.display = 'block';
            } else {
                switchEl.classList.remove('active');
                settingsDiv.style.display = 'none';
            }
        }

        function changeInterval(delta) {
            reminderInterval = Math.max(15, Math.min(180, reminderInterval + delta));
            document.getElementById('intervalDisplay').textContent = `${reminderInterval} åˆ†é’Ÿ`;
        }

        function changeStartTime(delta) {
            let totalMinutes = startHour * 60 + startMinute + delta * 60;
            totalMinutes = Math.max(0, Math.min(1439, totalMinutes));
            startHour = Math.floor(totalMinutes / 60);
            startMinute = totalMinutes % 60;
            document.getElementById('startTimeDisplay').textContent = 
                `${String(startHour).padStart(2, '0')}:${String(startMinute).padStart(2, '0')}`;
        }

        function changeEndTime(delta) {
            let totalMinutes = endHour * 60 + endMinute + delta * 60;
            totalMinutes = Math.max(0, Math.min(1439, totalMinutes));
            endHour = Math.floor(totalMinutes / 60);
            endMinute = totalMinutes % 60;
            document.getElementById('endTimeDisplay').textContent = 
                `${String(endHour).padStart(2, '0')}:${String(endMinute).padStart(2, '0')}`;
        }

        function changeDailyGoal(delta) {
            dailyGoal = Math.max(1, Math.min(20, dailyGoal + delta));
            document.getElementById('dailyGoalDisplay').textContent = `${dailyGoal} æ¯`;
        }

        function toggleStats() {
            const mainContent = document.getElementById('mainContent');
            const statsPanel = document.getElementById('statsPanel');
            
            if (statsPanel.classList.contains('active')) {
                statsPanel.classList.remove('active');
                mainContent.style.display = 'block';
            } else {
                statsPanel.classList.add('active');
                mainContent.style.display = 'none';
                updateStats();
            }
        }

        function updateStats() {
            // è®¡ç®—æ€»å–æ°´é‡
            const totalDrinks = Object.values(dailyRecords).reduce((sum, day) => sum + day.count, 0);
            document.getElementById('totalDrinks').textContent = totalDrinks;
            
            // è®¡ç®—è¾¾æ ‡å¤©æ•°
            const goalDays = Object.values(dailyRecords).filter(day => day.count >= dailyGoal).length;
            document.getElementById('goalDays').textContent = goalDays;
            
            // è®¡ç®—è¿ç»­è¾¾æ ‡å¤©æ•°
            const streak = calculateStreak();
            document.getElementById('currentStreak').textContent = streak;
            
            // æ¸²æŸ“å›¾è¡¨
            renderWeekChart();
            renderCalendar();
        }

        function calculateStreak() {
            const dates = Object.keys(dailyRecords).sort().reverse();
            let streak = 0;
            
            for (const date of dates) {
                if (dailyRecords[date].count >= dailyGoal) {
                    streak++;
                } else {
                    break;
                }
            }
            
            return streak;
        }

        function renderWeekChart() {
            const chartContainer = document.getElementById('weekChart');
            const today = new Date();
            const weekData = [];
            
            // è·å–æœ€è¿‘7å¤©çš„æ•°æ®
            for (let i = 6; i >= 0; i--) {
                const date = new Date(today);
                date.setDate(date.getDate() - i);
                const dateStr = date.toISOString().split('T')[0];
                const dayData = dailyRecords[dateStr];
                weekData.push({
                    date: date.toLocaleDateString('zh-CN', { weekday: 'short' }),
                    count: dayData ? dayData.count : 0
                });
            }
            
            // è®¡ç®—æœ€å¤§å€¼ç”¨äºå›¾è¡¨é«˜åº¦
            const maxCount = Math.max(...weekData.map(d => d.count), dailyGoal);
            
            chartContainer.innerHTML = weekData.map(d => {
                const height = maxCount > 0 ? (d.count / maxCount) * 150 : 0;
                return `
                    <div class="chart-bar" style="height: ${height}px;">
                        <span class="count">${d.count}</span>
                        <span class="label">${d.date}</span>
                    </div>
                `;
            }).join('');
        }

        function renderCalendar() {
            const calendarContainer = document.getElementById('calendarContainer');
            const today = new Date();
            const year = today.getFullYear();
            const month = today.getMonth();
            
            // è·å–å½“æœˆç¬¬ä¸€å¤©å’Œæœ€åä¸€å¤©
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            
            // è·å–å½“æœˆç¬¬ä¸€å¤©æ˜¯æ˜ŸæœŸå‡ ï¼ˆ0-6ï¼Œå‘¨æ—¥ä¸º0ï¼‰
            const firstDayOfWeek = firstDay.getDay();
            
            let calendarHTML = '';
            
            // æ·»åŠ ç©ºç™½æ ¼å­ï¼ˆå¡«è¡¥å‰é¢çš„ç©ºç™½ï¼‰
            for (let i = 0; i < firstDayOfWeek; i++) {
                calendarHTML += `<div class="calendar-day empty"></div>`;
            }
            
            // æ·»åŠ æ—¥æœŸæ ¼å­
            for (let day = 1; day <= lastDay.getDate(); day++) {
                const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                const isToday = dateStr === today.toISOString().split('T')[0];
                const dayData = dailyRecords[dateStr];
                const count = dayData ? dayData.count : 0;
                const achieved = count >= dailyGoal;
                
                let className = 'calendar-day';
                if (isToday) className += ' today';
                if (achieved) className += ' achieved';
                else if (count > 0) className += ' not-achieved';
                else className += ' empty';
                
                calendarHTML += `
                    <div class="${className}">
                        <span>${day}</span>
                        ${count > 0 ? `<span class="drink-count">${count}</span>` : ''}
                    </div>
                `;
            }
            
            calendarContainer.innerHTML = calendarHTML;
        }

        function saveSettings() {
            const settings = {
                reminderEnabled,
                reminderInterval,
                startTime: `${String(startHour).padStart(2, '0')}:${String(startMinute).padStart(2, '0')}`,
                endTime: `${String(endHour).padStart(2, '0')}:${String(endMinute).padStart(2, '0')}`,
                dailyGoal
            };
            
            showNotification(`ğŸ’ è®¾ç½®å·²ä¿å­˜ï¼\næé†’çŠ¶æ€ï¼š${settings.reminderEnabled ? 'å·²å¯ç”¨ ğŸ’—' : 'å·²ç¦ç”¨'}\næé†’é—´éš”ï¼š${settings.reminderInterval} åˆ†é’Ÿ\næé†’æ—¶é—´ï¼š${settings.startTime} - ${settings.endTime}\næ¯æ—¥ç›®æ ‡ï¼š${settings.dailyGoal} æ¯`);
            toggleSettings();
            saveData();
            
            // é‡æ–°è®¾ç½®æé†’
            if (reminderEnabled) {
                scheduleNextReminder();
            } else {
                clearTimeout(reminderTimeout);
                clearInterval(countdownInterval);
                document.getElementById('countdownTime').textContent = '--:--';
            }
        }

        // æ£€æŸ¥å½“å‰æ—¶é—´æ˜¯å¦åœ¨æé†’æ—¶é—´æ®µå†…
        function isInReminderTimeRange() {
            const now = new Date();
            const currentHour = now.getHours();
            const currentMinute = now.getMinutes();
            const currentTime = currentHour * 60 + currentMinute;
            const startTime = startHour * 60 + startMinute;
            const endTime = endHour * 60 + endMinute;
            return currentTime >= startTime && currentTime <= endTime;
        }

        // è®¡ç®—ä¸‹æ¬¡æé†’æ—¶é—´
        function getNextReminderTime() {
            const now = new Date();
            const reminderTime = new Date(now.getTime() + reminderInterval * 60000);
            
            // æ£€æŸ¥æ˜¯å¦è¶…å‡ºç»“æŸæ—¶é—´
            const endTimeToday = new Date();
            endTimeToday.setHours(endHour, endMinute, 0, 0);
            
            if (reminderTime > endTimeToday) {
                // æ¨è¿Ÿåˆ°æ˜å¤©çš„å¼€å§‹æ—¶é—´
                const tomorrow = new Date();
                tomorrow.setDate(tomorrow.getDate() + 1);
                tomorrow.setHours(startHour, startMinute, 0, 0);
                return tomorrow;
            }
            
            return reminderTime;
        }

        // æ˜¾ç¤ºå€’è®¡æ—¶
        function updateCountdown() {
            if (!reminderEnabled || !nextReminderTime) {
                document.getElementById('countdownTime').textContent = '--:--';
                return;
            }

            const now = new Date();
            const diff = nextReminderTime - now;

            if (diff <= 0) {
                document.getElementById('countdownTime').textContent = '00:00';
                return;
            }

            const hours = Math.floor(diff / 3600000);
            const minutes = Math.floor((diff % 3600000) / 60000);
            const seconds = Math.floor((diff % 60000) / 1000);

            if (hours > 0) {
                document.getElementById('countdownTime').textContent = 
                    `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            } else {
                document.getElementById('countdownTime').textContent = 
                    `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            }
        }

        // æ˜¾ç¤ºæé†’å¼¹çª—
        function showReminderPopup() {
            if (!reminderEnabled) return;
            
            // æ ¹æ®å½“å‰æ—¶é—´é€‰æ‹©æé†’è¯­
            const now = new Date();
            const hour = now.getHours();
            let messages;
            
            if (hour >= 6 && hour < 9) {
                messages = reminderMessages.morning;
            } else if (hour >= 18 && hour < 22) {
                messages = reminderMessages.evening;
            } else {
                messages = reminderMessages.general;
            }
            
            const message = messages[Math.floor(Math.random() * messages.length)];
            document.getElementById('reminderMessage').textContent = message;
            
            const timeStr = now.toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' });
            document.getElementById('reminderTimeInfo').textContent = `â° ${timeStr}`;
            
            document.getElementById('reminderPopup').classList.add('show');
            
            // åŒæ—¶æ˜¾ç¤ºé€šçŸ¥æç¤º
            showNotification(message);
        }

        // å…³é—­æé†’å¼¹çª—
        function closeReminder() {
            document.getElementById('reminderPopup').classList.remove('show');
            scheduleNextReminder();
        }

        // ä»æé†’å¼¹çª—å–æ°´
        function drinkFromReminder() {
            document.getElementById('reminderPopup').classList.remove('show');
            drinkWater();
            scheduleNextReminder();
        }

        let cooldownInterval = null;

        function showCooldownPopup(remainingSeconds) {
            const popup = document.getElementById('cooldownPopup');
            document.getElementById('cooldownTime').textContent = remainingSeconds;
            popup.classList.add('show');
            
            if (cooldownInterval) {
                clearInterval(cooldownInterval);
            }
            
            cooldownInterval = setInterval(() => {
                remainingSeconds--;
                document.getElementById('cooldownTime').textContent = remainingSeconds;
                
                if (remainingSeconds <= 0) {
                    closeCooldownPopup();
                }
            }, 1000);
        }

        function closeCooldownPopup() {
            const popup = document.getElementById('cooldownPopup');
            popup.classList.remove('show');
            
            if (cooldownInterval) {
                clearInterval(cooldownInterval);
                cooldownInterval = null;
            }
        }

        // æ˜¾ç¤ºå½©è›‹å¼¹çª—
        function showEasterEgg() {
            const popup = document.getElementById('easterEggPopup');
            popup.classList.add('show');
            createConfetti();
        }

        // éšè—å½©è›‹å¼¹çª—
        function hideEasterEgg() {
            const popup = document.getElementById('easterEggPopup');
            popup.classList.remove('show');
            setTimeout(() => {
                document.getElementById('confettiContainer').innerHTML = '';
            }, 500);
        }

        // åˆ›å»ºå½©çº¸æ•ˆæœ
        function createConfetti() {
            const container = document.getElementById('confettiContainer');
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff', '#ffd700', '#ff69b4'];
            const shapes = ['ğŸ‰', 'ğŸŠ', 'â­', 'ğŸ’–', 'ğŸ’—', 'âœ¨', 'ğŸŒŸ', 'ğŸ’•'];
            
            for (let i = 0; i < 100; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                    confetti.style.animationDelay = Math.random() * 0.5 + 's';
                    confetti.style.fontSize = (Math.random() * 20 + 15) + 'px';
                    confetti.innerHTML = shapes[Math.floor(Math.random() * shapes.length)];
                    container.appendChild(confetti);
                    
                    setTimeout(() => {
                        confetti.remove();
                    }, 4000);
                }, i * 30);
            }
        }

        // æ•°æ®æŒä¹…åŒ– - ä¿å­˜æ•°æ®
        function saveData() {
            const data = {
                drinkCount,
                records,
                reminderEnabled,
                reminderInterval,
                startHour,
                startMinute,
                endHour,
                endMinute,
                dailyGoal,
                dailyRecords,
                easterEggTriggered,
                lastDrinkTime
            };
            localStorage.setItem('drinkWaterData', JSON.stringify(data));
        }

        // æ•°æ®æŒä¹…åŒ– - åŠ è½½æ•°æ®
        function loadData() {
            const saved = localStorage.getItem('drinkWaterData');
            if (saved) {
                const data = JSON.parse(saved);
                if (data.drinkCount !== undefined) drinkCount = data.drinkCount;
                if (data.records) records = data.records;
                if (data.reminderEnabled !== undefined) reminderEnabled = data.reminderEnabled;
                if (data.reminderInterval) reminderInterval = data.reminderInterval;
                if (data.startHour !== undefined) startHour = data.startHour;
                if (data.startMinute !== undefined) startMinute = data.startMinute;
                if (data.endHour !== undefined) endHour = data.endHour;
                if (data.endMinute !== undefined) endMinute = data.endMinute;
                if (data.dailyGoal !== undefined) dailyGoal = data.dailyGoal;
                if (data.dailyRecords) dailyRecords = data.dailyRecords;
                if (data.easterEggTriggered !== undefined) easterEggTriggered = data.easterEggTriggered;
                if (data.lastDrinkTime) {
                    lastDrinkTime = new Date(data.lastDrinkTime);
                    // æ£€æŸ¥æ˜¯å¦æ˜¯æ–°çš„ä¸€å¤©ï¼Œå¦‚æœæ˜¯åˆ™é‡ç½®lastDrinkTime
                    const today = new Date().toISOString().split('T')[0];
                    const lastDrinkDate = lastDrinkTime.toISOString().split('T')[0];
                    if (today !== lastDrinkDate) {
                        lastDrinkTime = null;
                    }
                }
                
                // æ›´æ–°è®¾ç½®é¢æ¿çš„æ˜¾ç¤º
                if (data.dailyGoal !== undefined) {
                    document.getElementById('dailyGoalDisplay').textContent = `${dailyGoal} æ¯`;
                }
            }
        }

        // æ˜¾ç¤ºé€šçŸ¥æç¤º
        function showNotification(message) {
            const toast = document.getElementById('notificationToast');
            document.getElementById('toastMessage').textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 5000);
        }

        // è®¾ç½®ä¸‹æ¬¡æé†’
        function scheduleNextReminder() {
            clearTimeout(reminderTimeout);
            clearInterval(countdownInterval);
            
            if (!reminderEnabled) {
                document.getElementById('countdownTime').textContent = '--:--';
                return;
            }

            // æ£€æŸ¥å½“å‰æ˜¯å¦åœ¨æé†’æ—¶é—´æ®µå†…
            if (!isInReminderTimeRange()) {
                // ç­‰å¾…åˆ°å¼€å§‹æ—¶é—´
                const now = new Date();
                const startTimeToday = new Date();
                startTimeToday.setHours(startHour, startMinute, 0, 0);
                
                if (now > startTimeToday) {
                    // ä»Šå¤©çš„å¼€å§‹æ—¶é—´å·²è¿‡ï¼Œç­‰å¾…æ˜å¤©
                    startTimeToday.setDate(startTimeToday.getDate() + 1);
                }
                
                nextReminderTime = startTimeToday;
                const waitTime = startTimeToday - now;
                
                reminderTimeout = setTimeout(() => {
                    showReminderPopup();
                }, waitTime);
            } else {
                // åœ¨æ—¶é—´æ®µå†…ï¼Œæ­£å¸¸è®¾ç½®ä¸‹æ¬¡æé†’
                nextReminderTime = getNextReminderTime();
                
                reminderTimeout = setTimeout(() => {
                    showReminderPopup();
                }, reminderInterval * 60000);
            }
            
            // å¼€å§‹å€’è®¡æ—¶
            countdownInterval = setInterval(updateCountdown, 1000);
            updateCountdown();
        }

        // åˆå§‹åŒ–
        loadData();
        createFloatingHearts();
        updateTime();
        setInterval(updateTime, 1000);
        
        // å¯åŠ¨æé†’ç³»ç»Ÿ
        scheduleNextReminder();
    </script>
</body>
</html>
